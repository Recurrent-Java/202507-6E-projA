<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
  <!-- meta要素の部品化 -->
  <div th:fragment="meta" th:remove="tag"><!-- th:remove="tag"は、この <div> タグ自体を削除し、中身だけ貼り付けるという命令 -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- モバイルデバイスで閲覧する際、電話番号を自動的に検出しないようにする -->
    <meta name="format-detection" content="telephone=no">
    <meta name="_csrf" th:content="${_csrf?.token}" />
    <meta name="_csrf_header" th:content="${_csrf?.headerName}" />
  </div>
  <!-- link要素の部品化 -->
  <div th:fragment="styles" th:remove="tag">
    <!-- Reset CSS -->
    <link rel="stylesheet" th:href="@{/css/html5reset-1.6.1.css}">
    <!-- Original CSS -->
    <link rel="stylesheet" th:href="@{/css/chap25.css}">
    <!-- login CSS -->
    <link rel="stylesheet" th:href="@{/css/login-style.css}">
    <!-- Oregister CSS -->
    <link rel="stylesheet" th:href="@{/css/register-style.css}">
    <!-- mypage CSS -->
    <link rel="stylesheet" th:href="@{/css/style.css}">
  </div>
  <title>共通化用のHTMLファイル</title>
</head>

<body>
  <!-- header要素の部品化 -->
  <div th:fragment="header" th:remove="tag">
    <header class="header">
      <div class="header-inner">
        <a th:href="@{/}">
          <img th:src="@{/images/logo.png}" alt="HealSweets ロゴ" class="logo">
        </a>
      </div>

      <div class="header-right">
        <a th:href="@{/login}" class="header-icon">
          <img th:src="@{/images/login.png}" alt="ログイン">
          <span>ログイン</span>
        </a>

        <a th:href="@{/cart}" class="header-icon">
          <img th:src="@{/images/cart.png}" alt="カート">
          <span class="cart-badge">
          </span>
        </a>

      </div>
    </header>
  </div>
  <!-- nav要素の部品化 -->
  <div th:fragment="nav" th:remove="tag">
    <nav>
      <ul>
        <li><a th:href="@{/product}">商品</a></li>
        <li><a th:href="@{/cart}">カート</a></li>
        <li><a th:href="@{/purchase}">購入</a></li>
        <!-- ▼ 未ログインで表示 -->
        <li sec:authorize="isAnonymous()">
          <a th:href="@{/login}">ログイン</a>
        </li>
        <!-- ▼ ログイン済みで表示 -->
        <li sec:authorize="isAuthenticated()">
          <a th:href="@{/logout}" onclick="event.preventDefault(); document.getElementById('logout-form').submit();">
            ログアウト
          </a>
          <form id="logout-form" class="d-none" th:action="@{/logout}" method="post"></form>
        </li>
      </ul>
    </nav>
  </div>
  <!-- footer要素の部品化 -->
  <div th:fragment="footer" th:remove="tag">
    <footer class="footer">
      <div class="footer-inner">

        <!-- ロゴ・キャッチ -->
        <div class="footer-col">
          <div class="footer-logo">
            <img th:src="@{/images/logo.png}" alt="HealSweets ロゴ">
          </div>
          <p class="footer-text">食べられる喜びを、もっと多くの人へ。</p>
        </div>

        <!-- カテゴリー -->
        <div class="footer-col">
          <h4>カテゴリー</h4>
          <ul>
            <li><a th:href="@{/#productContainer}">すべての商品</a></li>
            <li><a th:href="@{/(catId=1)} + '#productContainer'">アレルゲンフリー</a></li>
            <li><a th:href="@{/(catId=2)} + '#productContainer'">低糖質</a></li>
            <li><a th:href="@{/(catId=3)} + '#productContainer'">カカオ70%</a></li>
          </ul>
        </div>

        <!-- 会社情報 -->
        <div class="footer-col">
          <h4>会社情報</h4>
          <ul>
            <li><a th:href="@{/company}">会社概要</a></li>
            <li><a th:href="@{/contact}">お問い合わせ</a></li>
            <li><a th:href="@{/privacy}">プライバシーポリシー</a></li>
          </ul>
        </div>

        <!-- マイアカウント -->
        <div class="footer-col">
          <h4>マイアカウント</h4>
          <ul>
            <li><a th:href="@{/mypage}">アカウント情報</a></li>
            <li><a th:href="@{/orders}">注文履歴</a></li>

            <li sec:authorize="isAnonymous()">
              <a th:href="@{/login}">ログイン</a>
            </li>
            <li sec:authorize="isAnonymous()">
              <a th:href="@{/register}">新規登録</a>
            </li>
          </ul>
        </div>

        <!-- お問い合わせ -->
        <div class="footer-col">
          <h4>お問い合わせ</h4>
          <p>📍 福岡市中央区長浜1-4-13</p>
          <p>📞 092-401-1835</p>
          <p>✉ info@healsweets.com</p>
        </div>

      </div>

      <div class="footer-bottom">
        <small>© 2025 HealSweets. All rights reserved.</small>
      </div>
    </footer>
  </div>
</body>

</html>