<!DOCTYPE html>
<!-- Thymeleafを使用するための記述 -->
<html lang="ja" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
  <div th:replace="~{comlayout/base :: meta}"></div>
  <div th:replace="~{comlayout/base :: styles}"></div>
  
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css"/>

  <link rel="stylesheet" th:href="@{/css/top.css}">
  <title>トップページ</title>
</head>

<body>
  <div th:replace="~{comlayout/base :: header}"></div>

  <main>
    <!-- メインビジュアル -->
    <section class="hero">
        <div><img th:src="@{/images/top1.png}" alt="スイーツ1"></div>
        <div><img th:src="@{/images/top2.png}" alt="スイーツ2"></div>
        <div><img th:src="@{/images/top3.png}" alt="スイーツ3"></div>
    </section>

    <!-- 検索 -->
	<section class="search">
	  <form th:action="@{/}" method="get">
	    <input type="text" name="keyword" placeholder="商品を検索" th:value="${keyword}">
	    <button type="submit">検索</button>
	  </form>
	</section>

    <!-- カテゴリー -->
    <section class="category">
      <ul>
        <li>
          <a th:href="@{/}" class="category-btn" 
             th:classappend="${catId == null || catId == 0} ? 'active' : ''">すべて</a>
        </li>

        <li th:each="cat : ${categoryList}">
          <a th:href="@{/(catId=${cat.catId})}" 
             class="category-btn" 
             th:classappend="${catId == cat.catId} ? 'active' : ''"
             th:text="${cat.catName}">カテゴリー名</a>
        </li>
      </ul>
    </section>

    <!-- 商品一覧 -->
    <section class="products">
      <h2>商品一覧</h2>

      <div id="productContainer">
        <div class="product-list" 
             th:fragment="product-list-fragment">
             <div class="product-card" th:each="product : ${products}">
                <a th:href="@{/product/products/{id}(id=${product?.productId})}">
                    <img th:src="@{${product.imagePath != null ? product.imagePath : '/images/noimage.png'}}" alt="">
                    <p class="name" th:text="${product.productName}"></p>
                    <p class="price">¥<span th:text="${product.price}"></span></p>
                </a>
             </div>
        </div>
    </section>
  </main>
  <div th:replace="~{comlayout/base :: footer}"></div>
  
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
    
  <script>
      $(document).ready(function(){
        $('.hero').slick({
          autoplay: true,       /* 自動再生 */
          autoplaySpeed: 3000,  /* 3秒ごとに次へ */
          dots: true,           /* 下に丸いドットを表示 */
          arrows: false,        /* 左右の矢印は一旦なし（デザインに合わせやすい） */
          fade: true,           /* ふわっと切り替える */
          speed: 1000           /* 切り替えにかける時間（1秒） */
        });
      });
   </script>
  
</body>

</html>